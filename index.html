<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Idle Realm</title>

<style>
:root{
  --bg:#0b1220;
  --card:#141c33;
  --card2:#1b2546;
  --accent:#2f6bff;
  --text:#e6ecff;
  --muted:#9aa4c7;
  --ok:#22c55e;
  --warn:#f59e0b;
}
*{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto}
body{margin:0;background:linear-gradient(180deg,#0a1020,#050a14);color:var(--text)}
header{position:sticky;top:0;background:#060b18;padding:8px 12px;display:flex;justify-content:space-between;font-size:14px}
main{padding:16px;max-width:500px;margin:auto}
.card{background:linear-gradient(180deg,var(--card),var(--card2));border-radius:16px;padding:16px;margin-bottom:16px}
button{width:100%;border:none;border-radius:14px;padding:14px;margin-bottom:8px;background:var(--accent);color:white;font-size:15px}
button:disabled{opacity:.4}
.grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
.tile{background:#0f1730;border-radius:12px;height:70px;display:flex;align-items:center;justify-content:center;font-size:28px}
.obj.ok{color:var(--ok)}
.obj.warn{color:var(--warn)}
.small{font-size:13px;color:var(--muted)}
</style>
</head>

<body>

<header>
  <span>ğŸ‘¥ <b id="pop"></b></span>
  <span>âš’ï¸ <b id="prod"></b></span>
  <span>ğŸ¥‰ <b id="bronze"></b></span>
  <span>ğŸ›¡ï¸ <b id="stab"></b>%</span>
</header>

<main>
<h1>Idle Realm</h1>
<div class="small">The Bronze Age demands balance.</div>

<div class="card">
  <h2>Era â€” Bronze Age</h2>
  <div id="objectives"></div>
</div>

<div class="card">
  <h2>Build</h2>
  <button onclick="build('settlement')">ğŸ  Settlement (40)</button>
  <button onclick="build('workshop')">âš’ï¸ Workshop (60)</button>
  <button onclick="build('council')">ğŸ›ï¸ Council (80)</button>
  <button onclick="build('mine')">â›ï¸ Mine (70)</button>
  <button onclick="build('smelter')">ğŸ”¥ Smelter (90)</button>
</div>

<div class="card">
  <h2>City</h2>
  <div class="grid" id="city"></div>
</div>

<script>
const MAX=9;
const COST={settlement:40,workshop:60,council:80,mine:70,smelter:90};
const UPKEEP={workshop:0.03,mine:0.05,smelter:0.08};

let s=JSON.parse(localStorage.getItem("idleRealm2"))||{
  pop:24,prod:50,bronze:0,stab:90,
  buildings:["âš’ï¸","ğŸ ","ğŸ ","ğŸ›ï¸"]
};

function save(){localStorage.setItem("idleRealm2",JSON.stringify(s));}

function build(t){
  if(s.prod<COST[t]||s.buildings.length>=MAX)return;
  s.prod-=COST[t];
  const icon={settlement:"ğŸ ",workshop:"âš’ï¸",council:"ğŸ›ï¸",mine:"â›ï¸",smelter:"ğŸ”¥"}[t];
  s.buildings.push(icon);
  save();update();
}

function update(){
  pop.textContent=s.pop;
  prod.textContent=s.prod.toFixed(1);
  bronze.textContent=s.bronze.toFixed(1);
  stab.textContent=s.stab.toFixed(0);

  city.innerHTML="";
  for(let i=0;i<MAX;i++){
    const d=document.createElement("div");
    d.className="tile";
    d.textContent=s.buildings[i]||"â¬œ";
    city.appendChild(d);
  }

  objectives.innerHTML=`
    <div class="obj ${s.bronze>=50?'ok':'warn'}">Produce 50 Bronze</div>
    <div class="obj ${s.stab>=80?'ok':'warn'}">Maintain Stability â‰¥ 80%</div>
  `;
}

setInterval(()=>{
  const w=s.buildings.filter(b=>b==="âš’ï¸").length;
  const m=s.buildings.filter(b=>b==="â›ï¸").length;
  const sm=s.buildings.filter(b=>b==="ğŸ”¥").length;

  s.prod+=w*0.15;
  if(sm>0&&s.prod>0){
    const c=Math.min(s.prod,sm*0.05);
    s.prod-=c;
    s.bronze+=c;
  }

  let drain=0;
  if(w)drain+=w*UPKEEP.workshop;
  if(m)drain+=m*UPKEEP.mine;
  if(sm)drain+=sm*UPKEEP.smelter;
  s.stab=Math.max(0,s.stab-drain);

  save();update();
},1000);

update();
</script>
</body>
</html>
