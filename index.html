<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Idle Realm</title>

<style>
:root {
  --bg: #070d1a;
  --panel: rgba(255,255,255,0.05);
  --accent: #3b82f6;
  --text: #e5e7eb;
  --muted: #9ca3af;
  --danger: #ef4444;
}

* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  background: radial-gradient(circle at top, #0b1430, var(--bg));
  color: var(--text);
}

.container {
  padding: 16px;
  max-width: 420px;
  margin: auto;
}

/* TOP BAR */
.topbar {
  display: flex;
  justify-content: space-between;
  gap: 8px;
  font-size: 13px;
  margin-bottom: 16px;
}
.topbar span {
  display: flex;
  align-items: center;
  gap: 4px;
}

/* PANELS */
.panel {
  background: var(--panel);
  border-radius: 16px;
  padding: 16px;
  margin-bottom: 16px;
  backdrop-filter: blur(10px);
}

h1 {
  margin: 8px 0 4px;
  font-size: 28px;
}
.subtitle {
  color: var(--muted);
  font-size: 14px;
  margin-bottom: 16px;
}

h2 {
  margin: 0 0 12px;
}

/* BUTTONS */
.buttons {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}
button {
  padding: 14px;
  border-radius: 14px;
  border: none;
  background: var(--accent);
  color: white;
  font-size: 15px;
  font-weight: 600;
}
button:disabled {
  background: #1f2937;
  color: var(--muted);
}

/* CITY GRID */
.city-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
  font-size: 28px;
  text-align: center;
}
.tile {
  padding: 12px;
  border-radius: 12px;
  background: rgba(255,255,255,0.06);
}

/* EVENTS */
.events {
  font-size: 13px;
  color: var(--muted);
}
.events div {
  margin-bottom: 4px;
}

/* ERA */
.era {
  font-size: 14px;
  color: var(--muted);
}
</style>
</head>

<body>
<div class="container">

  <!-- TOP BAR -->
  <div class="topbar">
    <span>üë• <span id="pop">10</span></span>
    <span>‚öíÔ∏è <span id="prod">10</span></span>
    <span>üõ°Ô∏è <span id="stab">100</span>%</span>
    <span>‚è≥ <span id="tick">0</span></span>
  </div>

  <h1>Idle Realm</h1>
  <div class="subtitle">A living world shaped by time and choices</div>

  <!-- BUILD -->
  <div class="panel">
    <h2>Build</h2>
    <div class="buttons">
      <button id="btnSettlement">üè† Settlement</button>
      <button id="btnWorkshop">‚öíÔ∏è Workshop</button>
      <button id="btnCouncil">üèõÔ∏è Council</button>
    </div>
    <div class="era" style="margin-top:8px;">
      Settlement cost: <span id="costSet">10</span> prod<br>
      Workshop cost: <span id="costWork">15</span> prod
    </div>
  </div>

  <!-- CITY -->
  <div class="panel">
    <h2>City</h2>
    <div class="city-grid" id="city">
      <div class="tile">‚¨ú</div>
      <div class="tile">‚¨ú</div>
      <div class="tile">‚¨ú</div>
      <div class="tile">‚¨ú</div>
      <div class="tile">‚¨ú</div>
      <div class="tile">‚¨ú</div>
      <div class="tile">‚¨ú</div>
      <div class="tile">‚¨ú</div>
      <div class="tile">‚¨ú</div>
    </div>
  </div>

  <!-- ERA -->
  <div class="panel">
    <h2>Era</h2>
    <div class="era">
      Foundations ‚Äî slow growth. Every choice matters.
    </div>
  </div>

  <!-- EVENTS -->
  <div class="panel">
    <h2>Events</h2>
    <div class="events" id="events"></div>
  </div>

</div>

<script>
/* GAME STATE */
let pop = 10;
let prod = 10;
let stab = 100;
let ticks = 0;

let settlements = 0;
let workshops = 0;
let councilBuilt = false;

const maxTiles = 9;

/* HELPERS */
const $ = id => document.getElementById(id);
function log(msg) {
  const e = $("events");
  e.innerHTML = `<div>‚Ä¢ ${msg}</div>` + e.innerHTML;
  e.innerHTML = e.innerHTML.split("</div>").slice(0,9).join("</div>");
}

/* COSTS */
function settlementCost() { return 10 + settlements * 5; }
function workshopCost() { return 15 + workshops * 8; }

/* UI UPDATE */
function update() {
  $("pop").textContent = pop.toFixed(1);
  $("prod").textContent = prod.toFixed(1);
  $("stab").textContent = Math.max(0, Math.min(100, stab)).toFixed(0);
  $("tick").textContent = ticks;

  $("costSet").textContent = settlementCost();
  $("costWork").textContent = workshopCost();

  $("btnSettlement").disabled = prod < settlementCost() || settlements + workshops + (councilBuilt?1:0) >= maxTiles;
  $("btnWorkshop").disabled = prod < workshopCost() || settlements + workshops + (councilBuilt?1:0) >= maxTiles;
  $("btnCouncil").disabled = councilBuilt || prod < 20;
}

/* BUILD ACTIONS */
function place(icon) {
  const tiles = document.querySelectorAll(".tile");
  for (let t of tiles) {
    if (t.textContent === "‚¨ú") {
      t.textContent = icon;
      return true;
    }
  }
  return false;
}

$("btnSettlement").onclick = () => {
  if (prod < settlementCost()) return log("Not enough production");
  if (!place("üè†")) return;
  prod -= settlementCost();
  settlements++;
  pop += 4;
  stab -= 8;
  log("Settlement built (+4 pop, -8 stab)");
  update();
};

$("btnWorkshop").onclick = () => {
  if (prod < workshopCost()) return log("Not enough production");
  if (!place("‚öíÔ∏è")) return;
  prod -= workshopCost();
  workshops++;
  prod += 2;
  stab -= 12;
  log("Workshop built (+2 prod, -12 stab)");
  update();
};

$("btnCouncil").onclick = () => {
  if (councilBuilt) return log("Only one Council allowed");
  if (prod < 20) return log("Not enough production");
  if (!place("üèõÔ∏è")) return;
  prod -= 20;
  stab += 20;
  councilBuilt = true;
  log("Council built (+20 stability)");
  update();
};

/* IDLE TICK */
setInterval(() => {
  ticks++;
  prod += workshops * 0.5;
  pop += settlements * 0.05;
  stab += councilBuilt ? 0.2 : -0.1;
  stab = Math.max(0, Math.min(100, stab));
  update();
}, 1000);

update();
</script>
</body>
</html>
