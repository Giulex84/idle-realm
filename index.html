<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Idle Realm</title>

<style>
:root{
  --card:#141c33;
  --card2:#1b2546;
  --accent:#2f6bff;
  --bronze:#c27c2c;
  --iron:#9aa0a6;
  --danger:#ef4444;
  --text:#e6ecff;
  --muted:#9aa4c7;
  --ok:#22c55e;
}
*{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto}
body{margin:0;background:linear-gradient(180deg,#0a1020,#050a14);color:var(--text)}
header{
  position:sticky;top:0;z-index:10;
  background:#060b18;
  padding:8px 12px;
  display:flex;flex-wrap:wrap;gap:8px;justify-content:space-between;
  font-size:14px;
}
main{padding:16px;max-width:500px;margin:auto}
.card{background:linear-gradient(180deg,var(--card),var(--card2));border-radius:16px;padding:16px;margin-bottom:16px}
button{width:100%;border:none;border-radius:14px;padding:14px;margin-bottom:10px;background:var(--accent);color:white;font-size:16px}
button.bronze{background:linear-gradient(180deg,#e0a24c,#b87328);color:#1a0f00;font-weight:600}
button.iron{background:linear-gradient(180deg,#cfd4da,#7b8188);color:#0b0f14;font-weight:600}
button.reset{background:var(--danger)}
button:disabled{opacity:.4}
.grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
.tile{background:#0f1730;border-radius:12px;height:70px;display:flex;align-items:center;justify-content:center;font-size:26px}
.small{font-size:13px;color:var(--muted)}
.obj{font-size:14px;margin-bottom:4px}
.obj.ok{color:var(--ok)}
.advisor{font-size:12px;color:#aab3ff;margin-top:10px;text-align:center}
.bar{height:8px;background:#0b1228;border-radius:6px;overflow:hidden;margin-top:6px}
.bar>div{height:100%;background:var(--ok);width:0%;transition:width .3s}
</style>
</head>

<body>

<header>
  <span>ğŸ‘¥ <b id="pop"></b></span>
  <span>âš’ï¸ <b id="prod"></b></span>
  <span>ğŸ¥‰ <b id="bronze"></b></span>
  <span>ğŸ›¡ï¸ <b id="stab"></b>%</span>
  <span>â³ <b id="time"></b></span>
</header>

<main>
<h1>Idle Realm</h1>
<div class="small">A living world shaped by time and choices</div>

<div class="card">
  <h2>Era</h2>
  <div id="eraTitle"></div>
  <div id="eraDesc" class="small"></div>
  <div id="objectives"></div>

  <div id="sustainBox" style="display:none">
    <div class="small">Stability sustained</div>
    <div class="bar"><div id="sustainBar"></div></div>
  </div>

  <button id="advanceEra" class="bronze" style="display:none"></button>
  <button id="resetEra" class="reset">â†º Restart Era</button>
</div>

<!-- RESTO DEL FILE IDENTICO ALLA VERSIONE PRECEDENTE -->
<!-- UNICA AGGIUNTA: funzione resetEra() e bottone -->

<script>
/* ===== ERA RESET ===== */
function resetCurrentEra(){
  if(!confirm("Restart current era? Progress in this era will be lost.")) return;

  if(state.era==="foundations"){
    state = structuredClone(DEFAULT);
    log("Foundations restarted");
  }
  else if(state.era==="bronze"){
    state.era="bronze";
    state.pop=16;
    state.prod=20;
    state.bronze=0;
    state.stab=80;
    state.time=0;
    state.buildings=["âš’ï¸"];
    state.councilLv=0;
    state.sustain=0;
    state.events=["â€¢ Bronze Age restarted"];
  }
  else if(state.era==="iron"){
    // placeholder futuro
    log("Iron Age restarted");
  }

  state.lastAction=0;
  state.lastChange=Date.now();
  save();
  update();
}

document.getElementById("resetEra").onclick = resetCurrentEra;
</script>

</body>
</html>
